<div class="container">

<table style="width: 100%;"><tr>
<td>websocketAPIpublic</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>websocketAPIpublic Class</h2>

<h3>Description</h3>

<p>Public channel of WebSocket API for <a href="https://www.okx.com/docs-v5/en/">Okx exchange v5 API</a>.
See <a href="https://www.okx.com/docs-v5/en/#websocket-api-public-channel">Public Channel</a> for more information.
</p>


<h3>Public fields</h3>

<div class="r6-fields">

<dl>
<dt><code>channel</code></dt>
<dd>
<p>Public WebSocket url.</p>
</dd>
<dt><code>simulate</code></dt>
<dd>
<p>Whether to use demo trading service.</p>
</dd>
<dt><code>ws</code></dt>
<dd>
<p>A websocket::WebSocket object to establish a connection to the server.</p>
</dd>
</dl>
</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-websocketAPIpublic-new"><code>websocketAPIpublic$new()</code></a>
</p>
</li>
<li> <p><a href="#method-websocketAPIpublic-connect"><code>websocketAPIpublic$connect()</code></a>
</p>
</li>
<li> <p><a href="#method-websocketAPIpublic-on_open"><code>websocketAPIpublic$on_open()</code></a>
</p>
</li>
<li> <p><a href="#method-websocketAPIpublic-on_close"><code>websocketAPIpublic$on_close()</code></a>
</p>
</li>
<li> <p><a href="#method-websocketAPIpublic-on_message"><code>websocketAPIpublic$on_message()</code></a>
</p>
</li>
<li> <p><a href="#method-websocketAPIpublic-on_error"><code>websocketAPIpublic$on_error()</code></a>
</p>
</li>
<li> <p><a href="#method-websocketAPIpublic-send"><code>websocketAPIpublic$send()</code></a>
</p>
</li>
<li> <p><a href="#method-websocketAPIpublic-close"><code>websocketAPIpublic$close()</code></a>
</p>
</li>
<li> <p><a href="#method-websocketAPIpublic-clone"><code>websocketAPIpublic$clone()</code></a>
</p>
</li>
</ul>
<hr>
<a id="method-websocketAPIpublic-new"></a>



<h4>Method <code>new()</code>
</h4>

<p>Create a new websocketAPIpublic object.
</p>


<h5>Usage</h5>

<div class="r"><pre>websocketAPIpublic$new(simulate = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>simulate</code></dt>
<dd>
<p>Whether to use demo trading service.</p>
</dd>
</dl>
</div>


<hr>
<a id="method-websocketAPIpublic-connect"></a>



<h4>Method <code>connect()</code>
</h4>

<p>Initiate the connection to the server.
</p>


<h5>Usage</h5>

<div class="r"><pre>websocketAPIpublic$connect()</pre></div>


<hr>
<a id="method-websocketAPIpublic-on_open"></a>



<h4>Method <code>on_open()</code>
</h4>

<p>Called when the connection is established.
</p>


<h5>Usage</h5>

<div class="r"><pre>websocketAPIpublic$on_open(func)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>func</code></dt>
<dd>
<p>A Callback function.</p>
</dd>
</dl>
</div>


<hr>
<a id="method-websocketAPIpublic-on_close"></a>



<h4>Method <code>on_close()</code>
</h4>

<p>Called when a previously-opened connection is closed.
The event will have 'code' (integer) and 'reason' (one-element character)
elements that describe the remote's reason for closing.
</p>


<h5>Usage</h5>

<div class="r"><pre>websocketAPIpublic$on_close(func)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>func</code></dt>
<dd>
<p>A Callback function.</p>
</dd>
</dl>
</div>


<hr>
<a id="method-websocketAPIpublic-on_message"></a>



<h4>Method <code>on_message()</code>
</h4>

<p>Called each time a message is received from the server.
The event will have a 'data' element, which is the message content.
</p>


<h5>Usage</h5>

<div class="r"><pre>websocketAPIpublic$on_message(func)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>func</code></dt>
<dd>
<p>A Callback function.</p>
</dd>
</dl>
</div>


<hr>
<a id="method-websocketAPIpublic-on_error"></a>



<h4>Method <code>on_error()</code>
</h4>

<p>Called when the connection fails to be established.
The event will have an 'message' element, a character vector of length 1
describing the reason for the error.
</p>


<h5>Usage</h5>

<div class="r"><pre>websocketAPIpublic$on_error(func)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>func</code></dt>
<dd>
<p>A Callback function.</p>
</dd>
</dl>
</div>


<hr>
<a id="method-websocketAPIpublic-send"></a>



<h4>Method <code>send()</code>
</h4>

<p>Send a message to the server.
</p>


<h5>Usage</h5>

<div class="r"><pre>websocketAPIpublic$send(msg)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>msg</code></dt>
<dd>
<p>Messages.</p>
</dd>
</dl>
</div>


<hr>
<a id="method-websocketAPIpublic-close"></a>



<h4>Method <code>close()</code>
</h4>

<p>Close the connection.
</p>


<h5>Usage</h5>

<div class="r"><pre>websocketAPIpublic$close()</pre></div>


<hr>
<a id="method-websocketAPIpublic-clone"></a>



<h4>Method <code>clone()</code>
</h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>websocketAPIpublic$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt>
<dd>
<p>Whether to make a deep clone.</p>
</dd>
</dl>
</div>




<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
tmp &lt;- websocketAPIpublic$new()
tmp$connect()

# subscribe BTC-USDT-SWAP 5m candlesticks data
msg &lt;- list(
  op = "unsubscribe",
  args = list(
    list(channel = "candle5m", instId = "BTC-USDT-SWAP")
  )
)
msg &lt;- jsonlite::toJSON(msg, auto_unbox = TRUE, pretty = TRUE)
tmp$send(msg)

# pass your own callback function
tmp$on_message(function(event) {
  if (event$data == "pong") {
    cat("Bingo!!\n")
  }
})
tmp$send("ping")

tmp$close()

## End(Not run)

</code></pre>


</div>