<div class="container">

<table style="width: 100%;"><tr>
<td>drawOpenKey</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Scale key handling for openair</h2>

<h3>Description</h3>

<p>General function for producing scale keys for other openair functions.  The
function is a crude modification of the draw.colorkey function developed by
Deepayan Sarkar as part of the lattice package, and allows additional key
labelling to added, and provides some additional control of the appearance
and scaling.
</p>


<h3>Usage</h3>

<pre><code class="language-R">drawOpenKey(key, draw = FALSE, vp = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>key</code></td>
<td>
<p>List defining the scale key structure to be produced. Most
options are identical to original <code>draw.colorkey</code> function.
</p>
<p>Original <code>draw.colorkey</code> options:
</p>
<p><code>space</code> location of the scale key ("left", "right", "top" or
"bottom").  Defaults to "right".
</p>
<p><code>col</code> vector of colours, used in scale key.
</p>
<p><code>at</code> numeric vector specifying where the colors change. Must be of
length 1 more than the col vector.
</p>
<p><code>labels</code> a character vector for labelling the at values, or more
commonly, a list describing characteristics of the labels. This list may
include components <code>labels</code>, <code>at</code>, <code>cex</code>, <code>col</code>,
<code>rot</code>, <code>font</code>, <code>fontface</code> and <code>fontfamily</code>.
</p>
<p><code>tick.number</code> approximate number of ticks.
</p>
<p><code>width</code> width of the key.
</p>
<p><code>height</code> height of key.
</p>
<p>Note: <code>width</code> and <code>height</code> refer to the key dimensions.
<code>height</code> is the length of the key along the plot axis it is
positioned against, and <code>width</code> is the length perpendicular to that.
</p>
<p>Additional options include:
</p>
<p><code>header</code> a character vector of extra text to be added above the key,
or a list describing some characteristics of the <code>header</code>. This list
may include components <code>header</code>, the character vector of header
labels, <code>tweaks</code>, a list of local controls, e.g. 'gap' and 'balance'
for spacing relative to scale and footer, respectively, <code>auto.text</code>,
<code>TRUE/FALSE</code> option to apply <code>quickText</code>, and <code>slot</code>, a
numeric vector setting the size of the text boxes <code>header</code> text is
placed in.
</p>
<p><code>footer</code> as in <code>header</code> but for labels below the scale key.
</p>
<p>Notes: <code>header</code> and <code>footer</code> formatting can not be set locally,
but instead are matched to those set in <code>labels</code>. <code>drawOpenKey</code>
allows for up to six additional labels (three above and three below scale
key). Any additional text is ignored.
</p>
<p><code>tweak, auto.text, slot</code> as in <code>header</code> and <code>footer</code> but
sets all options uniformly. This also overwrites anything in
<code>header</code> and/or <code>footer</code>.
</p>
<p><code>fit</code> the fit method to be applied to the header, scale key and footer
when placing the scale key left or right of the plot. Options include:
'all', 'soft' and 'scale'.  The default 'all' fits header, key and footer
into <code>height</code> range. The alternative 'scale' fits only the key
within <code>height</code>. (This means that keys keep the same proportions
relative to the main plot regardless of positioning but that header and
footer may exceed plot dimensions if <code>height</code> and/or <code>slots</code>
are too large.
</p>
<p><code>plot.style</code> a character vector of key plotting style instructions:
Options currently include: 'paddle', 'ticks' and 'border'. 'paddle'
applies the incremental paddle layout used by <code>winRose</code>. 'ticks'
places ticks between the labels scale key. 'border' places a border about
the scale key. Any combination of these may be used but if none set,
scale key defaults to <code>c("ticks", "border")</code> for most plotting
operations or <code>c("paddle")</code> for <code>windRose</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>draw</code></td>
<td>
<p>Option to return the key object or plot it directly.  The
default, FALSE, should always be used within openair calls.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vp</code></td>
<td>
<p>View port to be used when plotting key. The default, NULL, should
always be used within openair calls.
</p>
<p>(Note: <code>drawOpenKey</code> is a crude modification of
<code>lattice::draw.colorkey</code>, that provides labelling options for
<code>openair</code> plot scale keys. Some aspects of the function are in
development and may to subject to change. Therefore, it is recommended
that you use parent <code>openair</code> function controls, e.g.
<code>key.position</code>, <code>key.header</code>, <code>key.footer</code> options, where
possible.  <code>drawOpenKey</code> may obviously be used in other plots but it
is recommended that <code>draw.colorkey</code> itself be used wherever this
type of additional scale labelling is not required.)</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The <code>drawOpenKey</code> function produces scale keys for other openair
functions.
</p>
<p>Most <code>drawOpenKey</code> options are identical to those of
<code>lattice::draw.colorkey</code>.  For example, scale key size and position
are controlled via <code>height</code>, <code>width</code> and <code>space</code>. Likewise,
the axis labelling can be set in and formatted by <code>labels</code>. See
<code>draw.colorkey</code> for further details.
</p>
<p>Additional scale labelling may be added above and below the scale using
<code>header</code> and <code>footer</code> options within <code>key</code>. As in other
<code>openair</code> functions, automatic text formatting can be enabled via
<code>auto.key</code>.
</p>
<p>(Note: Currently, the formatting of <code>header</code> and <code>footer</code> text
are fixed to the same style as <code>labels</code> (the scale axis) and cannot be
defined locally.)
</p>
<p>The relationship between <code>header</code>, <code>footer</code> and the scale key
itself can be controlled using <code>fit</code> options. These can be set in
<code>key$fit</code> to apply uniform control or individually in
<code>key$header$fit</code> and/or <code>key$footer$fit</code> to control locally.
</p>
<p>The appearance of the scale can be controlled using <code>plot.style</code>.
</p>


<h3>Value</h3>

<p>The function is a modification of <code>lattice::draw.colorkey</code> and
returns a scale key using a similar mechanism to that used in in the
original function as developed by Deepayan Sarkar.
</p>


<h3>Note</h3>

<p>We gratefully acknowledge the considerable help and advice of
Deepayan Sarkar.
</p>


<h3>Author(s)</h3>

<p><code>draw.colorkey</code> is part of the <code>lattice</code> package,
developed by Deepayan Sarkar.
</p>
<p>Additional modifications by Karl Ropkins.
</p>


<h3>References</h3>

<p>Deepayan Sarkar (2010). lattice: Lattice Graphics. R package
version 0.18-5.  http://r-forge.r-project.org/projects/lattice/
</p>


<h3>See Also</h3>

<p>Functions using <code>drawOpenKey</code> currently include
<code>windRose</code>, <code>pollutionRose</code>.
</p>
<p>For details of the original function, see <code>draw.colorkey</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">

##########
#example 1
##########

#paddle style scale key used by windRose

windRose(mydata,)

#adding text and changing style and position via key

#note:
#some simple key control also possible directly
#For example, below does same as
#windRose(mydata, key.position="right")

windRose(mydata,
   key =list(space="right")
)

#however:
#more detailed control possible working with
#key and drawOpenKey. For example,

windRose(mydata,
   key = list(header="Title", footer="wind speed",
              plot.style = c("ticks", "border"),
              fit = "all", height = 1,
              space = "top")
)


</code></pre>


</div>