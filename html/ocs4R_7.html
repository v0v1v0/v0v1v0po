<div class="container">

<table style="width: 100%;"><tr>
<td>ocsManager</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>ocsManager</h2>

<h3>Description</h3>

<p>ocsManager
</p>


<h3>Format</h3>

<p><code>R6Class</code> object.
</p>


<h3>Value</h3>

<p>Object of <code>R6Class</code> for modelling an ocsManager
</p>


<h3>General Methods</h3>


<dl>
<dt><code>new(url, user, pwd, logger, keyring_backend)</code></dt>
<dd>
<p>This method is used to instantiate an ocsManager. The user/pwd are
mandatory in order to connect to 'ocs'. 
</p>
<p>The logger can be either NULL, "INFO" (with minimum logs), or "DEBUG" 
(for complete curl http calls logs).
</p>
<p>The <code>keyring_backend</code> can be set to use a different backend for storing 
the user password with <span class="pkg">keyring</span> (Default value is 'env').
</p>
</dd>
<dt><code>connect()</code></dt>
<dd>
<p>A method to connect to 'ocs' and set version/capabilities
</p>
</dd>
<dt><code>getVersion()</code></dt>
<dd>
<p>Get the 'ocs' server version
</p>
</dd>
<dt><code>getCapabilities()</code></dt>
<dd>
<p>Get the 'ocs' server capabilities
</p>
</dd>
<dt><code>getWebdavRoot()</code></dt>
<dd>
<p>Get the 'ocs' WebDAV root URL
</p>
</dd>
</dl>
<h3>WebDAV methods</h3>


<dl>
<dt><code>listFiles(relPath)</code></dt>
<dd>
<p>WebDAV method to list folders/files given a relative path. The relative path is set
to <code>"/"</code> by default, which corresponds to the root of the 'ocs' repository.
</p>
</dd>
<dt><code>makeCollection(name, relPath)</code></dt>
<dd>
<p>WebDAV method to make a collection. By default <code>relPath</code> is set to <code>"/"</code> (root).
The <code>name</code> is the name of the new collection to be created. The function is recursive
in the sense that a <code>name</code> can be provided as relative path of a collection tree 
(eg <code>newfolder1/newfolder2/newfolder3</code>), the function will create recursively as 
many collections are handled in the name. 
</p>
</dd>
<dt><code>uploadFile(filename, relPath)</code></dt>
<dd>
<p>WebDAV method to upload a file. By default <code>relPath</code> is set to <code>"/"</code> (root).
</p>
</dd>
</dl>
<h3>'OCS' Share API methods</h3>


<dl>
<dt><code>getShares(path, reshares, shared_with_me, state, subfiles, pretty)</code></dt>
<dd>
<p>Get list of shares as <code>list</code>. To return as <code>data.frame</code>, set 
<code>pretty = TRUE</code>. The method accepts additional parameters. 
</p>
</dd>
<dt><code>createShare(path, name, shareType, shareWith, publicUpload, password, 
 permissions = NULL, expireDate = NULL)</code></dt>
<dd>
<p>Creates a share for the path (file or folder), given a name. The <code>shareType</code> should be among
values 'user','group','publiclink' or 'federated'.The <code>shareWith</code> is required for <code>shareType</code> 
'user' and 'group' and corresponds to the username or groupname. The <code>permissions</code> can be set among
values 'read', 'update', 'create', 'delete', 'read-write', 'share', 'all'. By default the permissions will 
be the default permissions set by the ocs server (by default 'all').
</p>
</dd>
<dt><code>shareWithUser(path, name, username, permissions, pretty)</code></dt>
<dd>
<p>Shares a resource (file or folder) with a user given its username handled with argument <code>username</code>. 
The <code>permissions</code> can be set among values 'read', 'update', 'create', 'delete', 'read-write', 'share', 
'all'. By default the permissions will be the default permissions set by the ocs server (by default 'all').
Returns the share properties as <code>list</code> (or as<code>data.frame</code> if <code>pretty</code> is set to TRUE).
</p>
</dd>
<dt><code>shareWithGroup(path, name, group, permissions, pretty)</code></dt>
<dd>
<p>Shares a resource (file or folder) with a group given its name handled with argument <code>group</code>. 
The <code>permissions</code> can be set among values 'read', 'update', 'create', 'delete', 'read-write', 'share', 
'all'. By default the permissions will be the default permissions set by the ocs server (by default 'all').
Returns the share properties as <code>list</code> (or as<code>data.frame</code> if <code>pretty</code> is set to TRUE).
</p>
</dd>
<dt><code>shareAsPublicLink(path, name, publicUpload, password, permissions, expireDate)</code></dt>
<dd>
<p>Shares a resource (file or folder) as public link. The function returns the public link generated by ocs.
</p>
</dd>
</dl>
<h3>Author(s)</h3>

<p>Emmanuel Blondel &lt;emmanuel.blondel1@gmail.com&gt;
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
   #Not Run:
   #Connect to an OCS API
   OCS &lt;- ocsManager$new(url = ocs_url, user = ocs_user, pwd = ocs_pwd, logger = "DEBUG")
   version &lt;- OCS$getVersion()
   caps &lt;- OCS$getCapabilities()
   
   #OCS User Provisioning API
   #-------------------------------------
   #users
   users &lt;- OCS$getUsers() #get users
   user &lt;- OCS$getUser("admin") #get a user
   user.df &lt;- OCS$getUser("admin", TRUE) #the same user as data.frame
   added &lt;- OCS$addUser("john.doe", password = "ocs4john") #add a user
   disabled &lt;- OCS$disableUser("john.doe") #disable a user
   enabled &lt;- OCS$enableUser("john.doe") #enable auser
   edited &lt;- OCS$editUser("john.doe", key = "display", value = "John Doe") #edit user
   #edit some user field
   edited2 &lt;- OCS$editUserDisplayName("john.doe", displayName = "John Doe Jr.") 
   deleted &lt;- OCS$deleteUser("john.doe")
   
   #groups
   admingroups &lt;- OCS$getUserGroups("admin")
   groups &lt;- OCS$getGroups()
   added &lt;- OCS$addGroup("scientists") #add a new group
   sc_group &lt;- OCS$getGroup("scientists") #get group details
   added &lt;- OCS$addToGroup("john.doe", "scientists") #add user to group
   removed &lt;- OCS$removeFromGroup("john.doe", "scientists") #remove user from group
   deleted &lt;- OCS$deleteGroup("scientists")
   
   #OCS Webdav API
   #-------------------------------------
   #list files
   files &lt;- OCS$listFiles()
   subfiles &lt;- OCS$listFiles("Documents")
   #make collection
   OCS$makeCollection("myfolder")
   subfiles &lt;- OCS$listFiles("myfolder")
   #upload a file?
   filename &lt;- "magic.txt"
   file.create(filename); writeLines("ocs4R is great", filename)
   #we upload the file in 'Documents' folder
   OCS$uploadFile(filename, "/Documents")
   #check if file is uploaded
   OCS$listFiles('Documents')
   
   #OCS Sharing API
   #-------------------------------------
   #let's add a user with User provisioning API
   added &lt;- OCS$addUser("john.doe", password = "ocs4john") #add a user
   #let's share the previously uploaded file with John Doe
   OCS$shareWithUser("/Documents", filename, "john.doe")

## End(Not run)

</code></pre>


</div>