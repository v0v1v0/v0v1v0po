<div class="container">

<table style="width: 100%;"><tr>
<td>GaborFeatureExtract</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Gabor Feature Extraction</h2>

<h3>Description</h3>

<p>Gabor Feature Extraction
</p>
<p>Gabor Feature Extraction
</p>


<h3>Usage</h3>

<pre><code class="language-R"># init &lt;- GaborFeatureExtract$new()
</code></pre>


<h3>Details</h3>

<p>In case of an RGB image (3-dimensional where the third dimension is equal to 3) one can use the <em>rgb_2gray()</em> to convert the image to a 2-dimensional one
</p>
<p>I added the option <em>downsample_gabor</em> to the original matlab code based on the following question on stackoverflow : <em>https://stackoverflow.com/questions/49119991/feature-extraction-with-gabor-filters</em>
</p>


<h3>Methods</h3>


<dl>
<dt><code>GaborFeatureExtract$new()</code></dt>
<dd></dd>
<dt><code>--------------</code></dt>
<dd></dd>
<dt><code>gabor_filter_bank(scales, orientations, gabor_rows, gabor_columns, plot_data = FALSE)</code></dt>
<dd></dd>
<dt><code>--------------</code></dt>
<dd></dd>
<dt><code>gabor_feature_extraction(image, scales, orientations, gabor_rows, gabor_columns, downsample_gabor = FALSE, plot_data = FALSE,
                                      downsample_rows = NULL, downsample_cols = NULL, normalize_features = FALSE, threads = 1, vectorize_magnitude = TRUE)</code></dt>
<dd></dd>
<dt><code>--------------</code></dt>
<dd></dd>
<dt><code>gabor_feature_engine(img_data, img_nrow, img_ncol, scales, orientations, gabor_rows, gabor_columns, downsample_gabor = FALSE,
                                  downsample_rows = NULL, downsample_cols = NULL, normalize_features = FALSE, threads = 1, verbose = FALSE)</code></dt>
<dd></dd>
<dt><code>--------------</code></dt>
<dd></dd>
<dt><code>plot_gabor(real_matrices, margin_btw_plots = 0.15, thresholding = FALSE)</code></dt>
<dd></dd>
<dt><code>--------------</code></dt>
<dd></dd>
<dt><code>plot_multi_images(list_images, par_ROWS, par_COLS)</code></dt>
<dd></dd>
<dt><code>--------------</code></dt>
<dd></dd>
</dl>
<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-GaborFeatureExtract-new"><code>GaborFeatureExtract$new()</code></a>
</p>
</li>
<li> <p><a href="#method-GaborFeatureExtract-gabor_filter_bank"><code>GaborFeatureExtract$gabor_filter_bank()</code></a>
</p>
</li>
<li> <p><a href="#method-GaborFeatureExtract-gabor_feature_extraction"><code>GaborFeatureExtract$gabor_feature_extraction()</code></a>
</p>
</li>
<li> <p><a href="#method-GaborFeatureExtract-gabor_feature_engine"><code>GaborFeatureExtract$gabor_feature_engine()</code></a>
</p>
</li>
<li> <p><a href="#method-GaborFeatureExtract-plot_gabor"><code>GaborFeatureExtract$plot_gabor()</code></a>
</p>
</li>
<li> <p><a href="#method-GaborFeatureExtract-plot_multi_images"><code>GaborFeatureExtract$plot_multi_images()</code></a>
</p>
</li>
<li> <p><a href="#method-GaborFeatureExtract-clone"><code>GaborFeatureExtract$clone()</code></a>
</p>
</li>
</ul>
<hr>
<a id="method-GaborFeatureExtract-new"></a>



<h4>Method <code>new()</code>
</h4>



<h5>Usage</h5>

<div class="r"><pre>GaborFeatureExtract$new()</pre></div>


<hr>
<a id="method-GaborFeatureExtract-gabor_filter_bank"></a>



<h4>Method <code>gabor_filter_bank()</code>
</h4>



<h5>Usage</h5>

<div class="r"><pre>GaborFeatureExtract$gabor_filter_bank(
  scales,
  orientations,
  gabor_rows,
  gabor_columns,
  plot_data = FALSE
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>scales</code></dt>
<dd>
<p>a numeric value. Number of scales (usually set to 5)     ( gabor_filter_bank function )</p>
</dd>
<dt><code>orientations</code></dt>
<dd>
<p>a numeric value. Number of orientations (usually set to 8)     ( gabor_filter_bank function )</p>
</dd>
<dt><code>gabor_rows</code></dt>
<dd>
<p>a numeric value. Number of rows of the 2-D Gabor filter (an odd integer number, usually set to 39 depending on the image size)     ( gabor_filter_bank function )</p>
</dd>
<dt><code>gabor_columns</code></dt>
<dd>
<p>a numeric value. Number of columns of the 2-D Gabor filter (an odd integer number, usually set to 39 depending on the image size)       ( gabor_filter_bank function )</p>
</dd>
<dt><code>plot_data</code></dt>
<dd>
<p>either TRUE or FALSE. If TRUE then data needed for plotting will be returned     ( gabor_filter_bank, gabor_feature_extraction functions )</p>
</dd>
</dl>
</div>


<hr>
<a id="method-GaborFeatureExtract-gabor_feature_extraction"></a>



<h4>Method <code>gabor_feature_extraction()</code>
</h4>



<h5>Usage</h5>

<div class="r"><pre>GaborFeatureExtract$gabor_feature_extraction(
  image,
  scales,
  orientations,
  gabor_rows,
  gabor_columns,
  downsample_gabor = FALSE,
  plot_data = FALSE,
  downsample_rows = NULL,
  downsample_cols = NULL,
  normalize_features = FALSE,
  threads = 1,
  verbose = FALSE,
  vectorize_magnitude = TRUE
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>image</code></dt>
<dd>
<p>a 2-dimensional image of type matrix    ( gabor_feature_extraction function )</p>
</dd>
<dt><code>scales</code></dt>
<dd>
<p>a numeric value. Number of scales (usually set to 5)     ( gabor_filter_bank function )</p>
</dd>
<dt><code>orientations</code></dt>
<dd>
<p>a numeric value. Number of orientations (usually set to 8)     ( gabor_filter_bank function )</p>
</dd>
<dt><code>gabor_rows</code></dt>
<dd>
<p>a numeric value. Number of rows of the 2-D Gabor filter (an odd integer number, usually set to 39 depending on the image size)     ( gabor_filter_bank function )</p>
</dd>
<dt><code>gabor_columns</code></dt>
<dd>
<p>a numeric value. Number of columns of the 2-D Gabor filter (an odd integer number, usually set to 39 depending on the image size)       ( gabor_filter_bank function )</p>
</dd>
<dt><code>downsample_gabor</code></dt>
<dd>
<p>either TRUE or FALSE. If TRUE then downsampling of data will take place. The <em>downsample_rows</em> and <em>downsample_cols</em> should be adjusted accordingly. Downsampling does not affect the output plots but the output <em>gabor_features</em>     ( gabor_feature_extraction function )</p>
</dd>
<dt><code>plot_data</code></dt>
<dd>
<p>either TRUE or FALSE. If TRUE then data needed for plotting will be returned     ( gabor_filter_bank, gabor_feature_extraction functions )</p>
</dd>
<dt><code>downsample_rows</code></dt>
<dd>
<p>either NULL or a numeric value specifying the factor of downsampling along rows    ( gabor_feature_extraction function )</p>
</dd>
<dt><code>downsample_cols</code></dt>
<dd>
<p>either NULL or a numeric value specifying the factor of downsampling along columns    ( gabor_feature_extraction function )</p>
</dd>
<dt><code>normalize_features</code></dt>
<dd>
<p>either TRUE or FALSE. If TRUE then the output gabor-features will be normalized to zero mean and unit variance    ( gabor_feature_extraction function )</p>
</dd>
<dt><code>threads</code></dt>
<dd>
<p>a numeric value specifying the number of threads to use    ( gabor_feature_extraction function )</p>
</dd>
<dt><code>verbose</code></dt>
<dd>
<p>either TRUE or FALSE. If TRUE then information will be printed in the console    ( gabor_feature_extraction, gabor_feature_engine functions )</p>
</dd>
<dt><code>vectorize_magnitude</code></dt>
<dd>
<p>either TRUE or FALSE. If TRUE the computed magnitude feature will be returned in the form of a vector, otherwise it will be returned as a list of matrices  ( gabor_feature_extraction function )</p>
</dd>
</dl>
</div>


<hr>
<a id="method-GaborFeatureExtract-gabor_feature_engine"></a>



<h4>Method <code>gabor_feature_engine()</code>
</h4>



<h5>Usage</h5>

<div class="r"><pre>GaborFeatureExtract$gabor_feature_engine(
  img_data,
  img_nrow,
  img_ncol,
  scales,
  orientations,
  gabor_rows,
  gabor_columns,
  downsample_gabor = FALSE,
  downsample_rows = NULL,
  downsample_cols = NULL,
  normalize_features = FALSE,
  threads = 1,
  verbose = FALSE
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>img_data</code></dt>
<dd>
<p>a numeric matrix specifying the input data (gabor_feature_engine function)</p>
</dd>
<dt><code>img_nrow</code></dt>
<dd>
<p>an integer specifying the number of rows of the input matrix (gabor_feature_engine function)</p>
</dd>
<dt><code>img_ncol</code></dt>
<dd>
<p>an integer specifying the number of columns of the input matrix (gabor_feature_engine function)</p>
</dd>
<dt><code>scales</code></dt>
<dd>
<p>a numeric value. Number of scales (usually set to 5)     ( gabor_filter_bank function )</p>
</dd>
<dt><code>orientations</code></dt>
<dd>
<p>a numeric value. Number of orientations (usually set to 8)     ( gabor_filter_bank function )</p>
</dd>
<dt><code>gabor_rows</code></dt>
<dd>
<p>a numeric value. Number of rows of the 2-D Gabor filter (an odd integer number, usually set to 39 depending on the image size)     ( gabor_filter_bank function )</p>
</dd>
<dt><code>gabor_columns</code></dt>
<dd>
<p>a numeric value. Number of columns of the 2-D Gabor filter (an odd integer number, usually set to 39 depending on the image size)       ( gabor_filter_bank function )</p>
</dd>
<dt><code>downsample_gabor</code></dt>
<dd>
<p>either TRUE or FALSE. If TRUE then downsampling of data will take place. The <em>downsample_rows</em> and <em>downsample_cols</em> should be adjusted accordingly. Downsampling does not affect the output plots but the output <em>gabor_features</em>     ( gabor_feature_extraction function )</p>
</dd>
<dt><code>downsample_rows</code></dt>
<dd>
<p>either NULL or a numeric value specifying the factor of downsampling along rows    ( gabor_feature_extraction function )</p>
</dd>
<dt><code>downsample_cols</code></dt>
<dd>
<p>either NULL or a numeric value specifying the factor of downsampling along columns    ( gabor_feature_extraction function )</p>
</dd>
<dt><code>normalize_features</code></dt>
<dd>
<p>either TRUE or FALSE. If TRUE then the output gabor-features will be normalized to zero mean and unit variance    ( gabor_feature_extraction function )</p>
</dd>
<dt><code>threads</code></dt>
<dd>
<p>a numeric value specifying the number of threads to use    ( gabor_feature_extraction function )</p>
</dd>
<dt><code>verbose</code></dt>
<dd>
<p>either TRUE or FALSE. If TRUE then information will be printed in the console    ( gabor_feature_extraction, gabor_feature_engine functions )</p>
</dd>
</dl>
</div>


<hr>
<a id="method-GaborFeatureExtract-plot_gabor"></a>



<h4>Method <code>plot_gabor()</code>
</h4>



<h5>Usage</h5>

<div class="r"><pre>GaborFeatureExtract$plot_gabor(
  real_matrices,
  margin_btw_plots = 0.65,
  thresholding = FALSE
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>real_matrices</code></dt>
<dd>
<p>a list of 3-dimensional arrays (where the third dimension is equal to 3). These arrays correspond to the <em>real part</em> of the complex output matrices      ( plot_gabor function )</p>
</dd>
<dt><code>margin_btw_plots</code></dt>
<dd>
<p>a float between 0.0 and 1.0 specifying the margin between the multiple output plots      ( plot_gabor function )</p>
</dd>
<dt><code>thresholding</code></dt>
<dd>
<p>either TRUE or FALSE. If TRUE then a threshold of 0.5 will be used to push values above 0.5 to 1.0 ( similar to otsu-thresholding )      ( plot_gabor function )</p>
</dd>
</dl>
</div>


<hr>
<a id="method-GaborFeatureExtract-plot_multi_images"></a>



<h4>Method <code>plot_multi_images()</code>
</h4>



<h5>Usage</h5>

<div class="r"><pre>GaborFeatureExtract$plot_multi_images(
  list_images,
  par_ROWS,
  par_COLS,
  axes = FALSE,
  titles = NULL
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>list_images</code></dt>
<dd>
<p>a list containing the images to plot  ( plot_multi_images function )</p>
</dd>
<dt><code>par_ROWS</code></dt>
<dd>
<p>a numeric value specifying the number of rows of the plot-grid  ( plot_multi_images function )</p>
</dd>
<dt><code>par_COLS</code></dt>
<dd>
<p>a numeric value specifying the number of columns of the plot-grid  ( plot_multi_images function )</p>
</dd>
<dt><code>axes</code></dt>
<dd>
<p>a boolean. If TRUE then the X- and Y-range of values (axes) will appear in the output images  ( plot_multi_images function )</p>
</dd>
<dt><code>titles</code></dt>
<dd>
<p>either NULL or a character vector specifying the main-titles of the output images. The length of this vector must be the same as the length of the input 'list_images' parameter  ( plot_multi_images function )</p>
</dd>
</dl>
</div>


<hr>
<a id="method-GaborFeatureExtract-clone"></a>



<h4>Method <code>clone()</code>
</h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>GaborFeatureExtract$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt>
<dd>
<p>Whether to make a deep clone.</p>
</dd>
</dl>
</div>




<h3>References</h3>

<p>https://github.com/mhaghighat/gabor
</p>
<p>https://stackoverflow.com/questions/20608458/gabor-feature-extraction
</p>
<p>https://stackoverflow.com/questions/49119991/feature-extraction-with-gabor-filters
</p>


<h3>Examples</h3>

<pre><code class="language-R">
library(OpenImageR)

init_gb = GaborFeatureExtract$new()

# gabor-filter-bank
#------------------

gb_f = init_gb$gabor_filter_bank(scales = 5, orientations = 8, gabor_rows = 39,

                                 gabor_columns = 39, plot_data = TRUE)


# plot gabor-filter-bank
#-----------------------

plt_f = init_gb$plot_gabor(real_matrices = gb_f$gabor_real, margin_btw_plots = 0.65,

                           thresholding = FALSE)


# read image
#-----------

pth_im = system.file("tmp_images", "car.png", package = "OpenImageR")

im = readImage(pth_im) * 255


# gabor-feature-extract
#----------------------

# gb_im = init_gb$gabor_feature_extraction(image = im, scales = 5, orientations = 8,

#                                          downsample_gabor = TRUE, downsample_rows = 3,

#                                          downsample_cols = 3, gabor_rows = 39, gabor_columns = 39,

#                                          plot_data = TRUE, normalize_features = FALSE,

#                                          threads = 6)


# plot real data of gabor-feature-extract
#----------------------------------------

# plt_im = init_gb$plot_gabor(real_matrices = gb_im$gabor_features_real, margin_btw_plots = 0.65,

#                             thresholding = FALSE)


# feature generation for a matrix of images (such as the mnist data set)
#-----------------------------------------------------------------------

ROWS = 13; COLS = 13; SCAL = 3; ORIEN = 5; nrow_mt = 500; im_width = 12; im_height = 15

set.seed(1)
im_mt = matrix(sample(1:255, nrow_mt * im_width * im_height, replace = TRUE), nrow = nrow_mt,

                      ncol = im_width * im_height)

# gb_ex = init_gb$gabor_feature_engine(img_data = im_mt, img_nrow = im_width, img_ncol = im_height,

#                                      scales = SCAL, orientations = ORIEN, gabor_rows = ROWS,

#                                      gabor_columns = COLS, downsample_gabor = FALSE,

#                                      downsample_rows = NULL, downsample_cols = NULL,

#                                      normalize_features = TRUE, threads = 1, verbose = FALSE)


# plot of multiple image in same figure
#---------------------------------------

list_images = list(im, im, im)

plt_multi = init_gb$plot_multi_images(list_images, par_ROWS = 2, par_COLS = 2)

</code></pre>


</div>