<div class="container">

<table style="width: 100%;"><tr>
<td>eventMatch</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Match Market Orders (takers) to Limit Orders (makers).</h2>

<h3>Description</h3>

<p>Matches corresponding Bid(s) and Ask(s) for each trade event.
</p>


<h3>Usage</h3>

<pre><code class="language-R">eventMatch(events, cut.off.ms = 5000)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>events</code></td>
<td>
<p>data frame of order book events.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cut.off.ms</code></td>
<td>
<p>events occuring outside of this time (in milliseconds) 
will be considered as candidate matches.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>A trade event (a market impact) will generate a list of volume change events.
This function will line up 2 time ordered event lists for each side of the
book and attempt to align them by matching volume. If the result contains 
duplicate matches, then the matching is treated as a sequence alignment 
problem, and the Needleman-Wunsch algorithm is applied. As such, the
function acts as a type of "one shot" matching engine, simulating an order
book matching engine without the need to reconstruct the whole book.
</p>


<h3>Author(s)</h3>

<p>phil
</p>


<h3>Examples</h3>

<pre><code class="language-R">
asTime &lt;- function(s) as.POSIXct(s, tz="UTC")
events &lt;- data.frame(timestamp=c(asTime("2015-10-10 21:32:00.000"),
                                 asTime("2015-10-10 21:32:00.010"),
                                 asTime("2015-10-10 21:32:10.000"),
                                 asTime("2015-10-10 21:32:10.010")),
                      direction=c("bid", "ask", "bid", "ask"),
                      event.id=c(1, 2, 3, 4),
                      fill=rep(1234, 4))
matched &lt;- obAnalytics:::eventMatch(events, cut.off.ms=1000)

</code></pre>


</div>