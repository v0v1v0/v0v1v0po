<div class="container">

<table style="width: 100%;"><tr>
<td>websocketAPIprivate</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>websocketAPIprivate Class</h2>

<h3>Description</h3>

<p>Private channel of WebSocket API for <a href="https://www.okx.com/docs-v5/en/">Okx exchange v5 API</a>.
See <a href="https://www.okx.com/docs-v5/en/#websocket-api-private-channel">Private Channel</a> for more information.
</p>


<h3>Public fields</h3>

<div class="r6-fields">

<dl>
<dt><code>channel</code></dt>
<dd>
<p>Private WebSocket url.</p>
</dd>
<dt><code>api_key</code></dt>
<dd>
<p>Okx API key.</p>
</dd>
<dt><code>secret_key</code></dt>
<dd>
<p>Okx API secret key.</p>
</dd>
<dt><code>passphrase</code></dt>
<dd>
<p>Okx API passphrase.</p>
</dd>
<dt><code>simulate</code></dt>
<dd>
<p>Whether to use demo trading service.</p>
</dd>
<dt><code>ws</code></dt>
<dd>
<p>A websocket::WebSocket object to establish a connection to the server.</p>
</dd>
</dl>
</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-websockerAPIprivate-new"><code>websocketAPIprivate$new()</code></a>
</p>
</li>
<li> <p><a href="#method-websockerAPIprivate-get_timestamp"><code>websocketAPIprivate$get_timestamp()</code></a>
</p>
</li>
<li> <p><a href="#method-websockerAPIprivate-get_message"><code>websocketAPIprivate$get_message()</code></a>
</p>
</li>
<li> <p><a href="#method-websockerAPIprivate-get_signature"><code>websocketAPIprivate$get_signature()</code></a>
</p>
</li>
<li> <p><a href="#method-websockerAPIprivate-connect"><code>websocketAPIprivate$connect()</code></a>
</p>
</li>
<li> <p><a href="#method-websockerAPIprivate-login"><code>websocketAPIprivate$login()</code></a>
</p>
</li>
<li> <p><a href="#method-websockerAPIprivate-on_open"><code>websocketAPIprivate$on_open()</code></a>
</p>
</li>
<li> <p><a href="#method-websockerAPIprivate-on_close"><code>websocketAPIprivate$on_close()</code></a>
</p>
</li>
<li> <p><a href="#method-websockerAPIprivate-on_message"><code>websocketAPIprivate$on_message()</code></a>
</p>
</li>
<li> <p><a href="#method-websockerAPIprivate-on_error"><code>websocketAPIprivate$on_error()</code></a>
</p>
</li>
<li> <p><a href="#method-websockerAPIprivate-send"><code>websocketAPIprivate$send()</code></a>
</p>
</li>
<li> <p><a href="#method-websockerAPIprivate-close"><code>websocketAPIprivate$close()</code></a>
</p>
</li>
<li> <p><a href="#method-websockerAPIprivate-clone"><code>websocketAPIprivate$clone()</code></a>
</p>
</li>
</ul>
<hr>
<a id="method-websockerAPIprivate-new"></a>



<h4>Method <code>new()</code>
</h4>

<p>Craeate a new websocketAPIprivate object.
</p>


<h5>Usage</h5>

<div class="r"><pre>websocketAPIprivate$new(api_key, secret_key, passphrase, simulate = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>api_key</code></dt>
<dd>
<p>Okx API key.</p>
</dd>
<dt><code>secret_key</code></dt>
<dd>
<p>Okx API secret key.</p>
</dd>
<dt><code>passphrase</code></dt>
<dd>
<p>Okx API passphrase.</p>
</dd>
<dt><code>simulate</code></dt>
<dd>
<p>Whether to use demo trading service.</p>
</dd>
</dl>
</div>


<hr>
<a id="method-websockerAPIprivate-get_timestamp"></a>



<h4>Method <code>get_timestamp()</code>
</h4>

<p>Get UTC timestamp.
</p>


<h5>Usage</h5>

<div class="r"><pre>websocketAPIprivate$get_timestamp()</pre></div>


<hr>
<a id="method-websockerAPIprivate-get_message"></a>



<h4>Method <code>get_message()</code>
</h4>

<p>Get the signing messages.
</p>


<h5>Usage</h5>

<div class="r"><pre>websocketAPIprivate$get_message(timestamp)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>timestamp</code></dt>
<dd>
<p>Retrieve through method <code>get_timestamp</code>.</p>
</dd>
</dl>
</div>


<hr>
<a id="method-websockerAPIprivate-get_signature"></a>



<h4>Method <code>get_signature()</code>
</h4>

<p>Get the signature.
</p>


<h5>Usage</h5>

<div class="r"><pre>websocketAPIprivate$get_signature(secret_key, msg)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>secret_key</code></dt>
<dd>
<p>Okx API secret key.</p>
</dd>
<dt><code>msg</code></dt>
<dd>
<p>Retrieve through method <code>get_message</code>.</p>
</dd>
</dl>
</div>


<hr>
<a id="method-websockerAPIprivate-connect"></a>



<h4>Method <code>connect()</code>
</h4>

<p>Initiate the connection to the server.
</p>


<h5>Usage</h5>

<div class="r"><pre>websocketAPIprivate$connect()</pre></div>


<hr>
<a id="method-websockerAPIprivate-login"></a>



<h4>Method <code>login()</code>
</h4>

<p>Log in.
</p>


<h5>Usage</h5>

<div class="r"><pre>websocketAPIprivate$login()</pre></div>


<hr>
<a id="method-websockerAPIprivate-on_open"></a>



<h4>Method <code>on_open()</code>
</h4>

<p>Called when the connection is established.
</p>


<h5>Usage</h5>

<div class="r"><pre>websocketAPIprivate$on_open(func)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>func</code></dt>
<dd>
<p>A Callback function.</p>
</dd>
</dl>
</div>


<hr>
<a id="method-websockerAPIprivate-on_close"></a>



<h4>Method <code>on_close()</code>
</h4>

<p>Called when a previously-opened connection is closed.
The event will have 'code' (integer) and 'reason' (one-element character)
elements that describe the remote's reason for closing.
</p>


<h5>Usage</h5>

<div class="r"><pre>websocketAPIprivate$on_close(func)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>func</code></dt>
<dd>
<p>A Callback function.</p>
</dd>
</dl>
</div>


<hr>
<a id="method-websockerAPIprivate-on_message"></a>



<h4>Method <code>on_message()</code>
</h4>

<p>Called each time a message is received from the server.
The event will have a 'data' element, which is the message content.
</p>


<h5>Usage</h5>

<div class="r"><pre>websocketAPIprivate$on_message(func)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>func</code></dt>
<dd>
<p>A Callback function.</p>
</dd>
</dl>
</div>


<hr>
<a id="method-websockerAPIprivate-on_error"></a>



<h4>Method <code>on_error()</code>
</h4>

<p>Called when the connection fails to be established.
The event will have an 'message' element, a character vector of length 1
describing the reason for the error.
</p>


<h5>Usage</h5>

<div class="r"><pre>websocketAPIprivate$on_error(func)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>func</code></dt>
<dd>
<p>A Callback function.</p>
</dd>
</dl>
</div>


<hr>
<a id="method-websockerAPIprivate-send"></a>



<h4>Method <code>send()</code>
</h4>

<p>Send a message to the server.
</p>


<h5>Usage</h5>

<div class="r"><pre>websocketAPIprivate$send(msg)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>msg</code></dt>
<dd>
<p>Messages.</p>
</dd>
</dl>
</div>


<hr>
<a id="method-websockerAPIprivate-close"></a>



<h4>Method <code>close()</code>
</h4>

<p>Close the connection.
</p>


<h5>Usage</h5>

<div class="r"><pre>websocketAPIprivate$close()</pre></div>


<hr>
<a id="method-websockerAPIprivate-clone"></a>



<h4>Method <code>clone()</code>
</h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>websocketAPIprivate$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt>
<dd>
<p>Whether to make a deep clone.</p>
</dd>
</dl>
</div>




<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
tmp &lt;- websocketAPIprivate$new(api_key, secret_key, passphrase)
tmp$connect()
Sys.sleep(1)
tmp$login()

# subscribe account information
msg &lt;- list(
  op = "subscribe",
  args = list(
    list(channel = "account", ccy = "USDT")
  )
)
msg &lt;- jsonlite::toJSON(msg, auto_unbox = TRUE, pretty = TRUE)
tmp$send(msg)

# pass your own callback function
tmp$on_message(function(event) {
  if (event$data == "pong") {
    cat("Bingo!!\n")
  }
})
tmp$send("ping")

tmp$close()

## End(Not run)

</code></pre>


</div>