<div class="container">

<table style="width: 100%;"><tr>
<td>otp_build_graph</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Build an OTP Graph</h2>

<h3>Description</h3>

<p>OTP is run in Java and requires Java commands to be typed into
the command line. The function allows the parameters to be defined in R and
automatically passed to Java. This function builds a OTP graph from the
Open Street Map and other files.
</p>


<h3>Usage</h3>

<pre><code class="language-R">otp_build_graph(
  otp = NULL,
  dir = NULL,
  memory = 2048,
  router = "default",
  flag64bit = TRUE,
  quiet = TRUE,
  otp_version = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>otp</code></td>
<td>
<p>A character string, path to the OTP .jar file</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dir</code></td>
<td>
<p>A character string, path to a directory containing the necessary
files, see details</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>memory</code></td>
<td>
<p>A positive integer. Amount of memory to assign to the OTP in
MB, default is 2048</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>router</code></td>
<td>
<p>A character string for the name of the router, must subfolder
of  dir/graphs, default "default". See vignettes for details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>flag64bit</code></td>
<td>
<p>Logical, if true the -d64 flag is added to Java instructions,
ignored if otp_version &gt;= 2</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>quiet</code></td>
<td>
<p>Logical, if FALSE the Java commands will be printed to console</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>otp_version</code></td>
<td>
<p>Numeric, version of OTP to build, default NULL when version
is auto-detected</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The OTP .jar file can be downloaded from
https://repo1.maven.org/maven2/org/opentripplanner/otp/
</p>
<p>To build an OTP graph requires the following files to be in the directory
specified by the dir variable.
</p>
<p>/graphs - A sub-directory
</p>
<p>/default - A sub-directory with the name of the OTP router used in router'
variable
</p>
<p>osm.pbf - Required, pbf file containing the Open Street Map
</p>
<p>router-config.json - Required, json file containing configurations settings
for the OTP
</p>
<p>gtfs.zip - Optional, and number of GTFS files with transit timetables
</p>
<p>terrain.tif - Optional, GeoTiff image of terrain map
</p>
<p>The function will accept any file name for the .jar file, but it must be
the only .jar file in that directory OTP can support multiple routers (e.g.
different regions), each router must have its own sub-directory in the
graphs directory
</p>


<h3>Value</h3>

<p>Character vector of messages produced by OTP, and will return the
message "Graph built" if successful
</p>


<h3>See Also</h3>

<p>Other setup: 
<code>otp_check_java()</code>,
<code>otp_check_version()</code>,
<code>otp_dl_demo()</code>,
<code>otp_dl_jar()</code>,
<code>otp_make_config()</code>,
<code>otp_setup()</code>,
<code>otp_stop()</code>,
<code>otp_validate_config()</code>,
<code>otp_write_config()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
log &lt;- otp_build_graph(otp = "C:/otp/otp.jar", dir = "C:/data")

## End(Not run)
</code></pre>


</div>