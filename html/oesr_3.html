<div class="container">

<table style="width: 100%;"><tr>
<td>oes_prep</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Prepare Model Output for OES Plots</h2>

<h3>Description</h3>

<p>Prepare output of linear modeling object into a tidy data table to feed
into OES plotting function
</p>


<h3>Usage</h3>

<pre><code class="language-R">oes_prep(
  model,
  treatment_vars = NULL,
  treatment_arms = NULL,
  scale = c("response", "percentage"),
  treatment_labels,
  control_label,
  alpha_level = 0.05
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>model</code></td>
<td>
<p>An object of class <code>lm</code> or <code>lm_robust</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>treatment_vars</code></td>
<td>
<p>An optional character vector of treatment arm names. One
of <code>treatment_vars</code> or <code>treatment_arms</code> must be supplied.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>treatment_arms</code></td>
<td>
<p>An optional numeric value indicating the number of treatment
arms. (Not required if treatment_vars is given explicitly.) One
of <code>treatment_vars</code> or <code>treatment_arms</code> must be supplied.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scale</code></td>
<td>
<p>String indicating the <code class="reqn">y</code>-axis scale. Default is <code>'response'</code>.
For binary outcomes, it may be desirable to set to <code>"percentage"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>treatment_labels</code></td>
<td>
<p>Optional vector of string labels providing treatment condition(s)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>control_label</code></td>
<td>
<p>Optional string providing control condition label</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha_level</code></td>
<td>
<p>The level at which to reject the null hypothesis for adding
asterisks to plots. Set to 0.05 by default. This value also determines the size
of the confidence intervals (<code>alpha_level = 0.05</code> corresponds to 95% confidence
intervals).</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>oes_prep()</code> takes a linear modeling output object (from <code>lm()</code>
or <code>lm_robust()</code>) and returns a tidy tibble of estimates,
confidence bounds, and related quantities ready for oes_plot to plot.
Functionality for <code>lm_lin()</code> objects is in development.
</p>


<h3>Value</h3>

<p>A tibble of <code class="reqn">T+1</code> rows and 8 columns, where <code class="reqn">T</code> is the number
of treatment conditions specified via <code>treatment_vars</code> or
<code>treatment_arms</code>.
</p>


<h3>Author(s)</h3>

<p>Miles Williams
</p>


<h3>Examples</h3>

<pre><code class="language-R">
data(df_oes)

# Single binary treatment:
fit &lt;- lm(y1 ~ x1, df_oes)

# Multiple treatment conditions:
fit2 &lt;- lm(y2 ~ x2, df_oes)

# Using HC2 SE's from lm_robust():
fit_robust &lt;- estimatr::lm_robust(y1 ~ x1, df_oes)
fit_robust2 &lt;- estimatr::lm_robust(y2 ~ x2, df_oes)

# Using covariates and lm():
fit_covars &lt;- lm(y2 ~ x2 + z1 + z2 + z3, df_oes)

# Using covariates and lm_robust():
fit_covars_robust &lt;- estimatr::lm_robust(y2 ~ x2 + z1 + z2 + z3, df_oes)

# Example specifying number of treatment arms:
oes_prep(fit, treatment_arms = 1)

# Example specifying name of treatment variable:
oes_prep(fit, treatment_vars = "x1")

# Example reporting outcomes as percentages:
oes_prep(fit, treatment_vars = "x1", scale = "percentage")

# Example specifying several treatment arms, labels, etc.:
oes_prep(fit2, treatment_arms = 3,
  treatment_labels = c(
    "Email",
    "Email +\nReward",
    "Email +\nRisk"),
  control_label = "Status Quo",
  scale = "percentage")

# Examples with lm_robust():
oes_prep(fit_robust, treatment_arms = 1)
oes_prep(fit_robust2, treatment_arms = 3)

# Examples with covariates:
oes_prep(fit_covars, treatment_arms = 3)
oes_prep(fit_covars_robust, treatment_arms = 3)

</code></pre>


</div>